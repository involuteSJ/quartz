---
CMDS: Algorithm
관련 문서:
  - "[[Algorithm Concepts]]"
tags:
  - "#LCS"
category: content
---
## LCS \[O($m*n$)\]

<center><i><b>L</b>ongest <b>C</b>ommon <b>S</b>ubsequence</i></center>

#### 최장 공통 부분 수열
- 두 개의 문자열이나 수열 사이에 순서를 유지하면서 연속되지 않아도 되는 공통된 부분
- ##### 사용처
	- diff(파일 비교 유틸리티)
	- DNA 서열 분석

##### ex
- 두 문자열 "ABCDEF" "ACCDE" 가 존재할 때 순서를 유지하면서 연속되지 않아도 되는 공통 부분은 ACDE 이다
- LCS 는 여러 개 존재할 수 있다

#### 동작 원리
1. 두 문자열을 입력받는다
	- str1 = "ABCDEF"
	- str2 = "ACCDE"
2. 두 문자열의 길이가 6, 5 이므로 (6+1)\*(5+1) 인 2차원 배열 dp를 생성
	- 빈 문자열과의 길이 비교를 위해 +1

|     |  -  |  A  |  C  |  C  |  D  |  E  |
| :-: | :-: | :-: | :-: | :-: | :-: | :-: |
|  -  |  0  |  0  |  0  |  0  |  0  |  0  |
|  A  |  0  |     |     |     |     |     |
|  B  |  0  |     |     |     |     |     |
|  C  |  0  |     |     |     |     |     |
|  D  |  0  |     |     |     |     |     |
|  E  |  0  |     |     |     |     |     |
|  F  |  0  |     |     |     |     |     |
1. 아래 조건에 따라 채워나간다
	- 문자가 같은 경우
		- str1\[i-1\] == str2\[j-1\] => dp\[i\]\[j\] = dp\[i-1\]\[j-1\] + 1
		- 문자가 같으면 이전 길이 +1
	- 문자가 다른 경우
		- str1\[i-1\] != str2\[j-2\] => dp\[i\]\[j\] = max(dp\[i-1\]\[j\], dp\[i\]\[j-1\])
		- 문자가 다르면 현재 위치에서 하나의 문자열을 제외했을 때의 최대값을 가져옴

|     |               -                |               A                |               C                |  C  |  D  |  E  |
| :-: | :----------------------------: | :----------------------------: | :----------------------------: | :-: | :-: | :-: |
|  -  | <font color="#4bacc6">0</font> |               0                |               0                |  0  |  0  |  0  |
|  A  |               0                | <font color="#4bacc6">1</font> |                                |     |     |     |
|  B  |               0                |                                |                                |     |     |     |
|  C  |               0                |                                |                                |     |     |     |
|  D  |               0                |                                |                                |     |     |     |
|  E  |               0                |                                |                                |     |     |     |
|  F  |               0                |                                |                                |     |     |     |
|     |               -                |               A                |               C                |  C  |  D  |  E  |
|  -  |               0                |               0                | <font color="#f79646">0</font> |  0  |  0  |  0  |
|  A  |               0                | <font color="#f79646">1</font> | <font color="#f79646">1</font> |     |     |     |
|  B  |               0                |                                |                                |     |     |     |
|  C  |               0                |                                |                                |     |     |     |
|  D  |               0                |                                |                                |     |     |     |
|  E  |               0                |                                |                                |     |     |     |
|  F  |               0                |                                |                                |     |     |     |
1. 모두 채운 배열

|     |  -  |               A                |               C                |               C                |               D                |               E                |
| :-: | :-: | :----------------------------: | :----------------------------: | :----------------------------: | :----------------------------: | :----------------------------: |
|  -  |  0  |               0                |               0                |               0                |               0                |               0                |
|  A  |  0  |               1                |               1                |               1                |               1                |               1                |
|  B  |  0  | <font color="#4bacc6">1</font> | <font color="#4bacc6">1</font> |               1                |               1                |               1                |
|  C  |  0  |               1                | <font color="#4bacc6">2</font> | <font color="#4bacc6">2</font> |               2                |               2                |
|  D  |  0  |               1                |               2                |               2                | <font color="#4bacc6">3</font> |               3                |
|  E  |  0  |               1                |               2                |               2                |               3                | <font color="#4bacc6">4</font> |
|  F  |  0  |               1                |               2                |               2                |               3                |               4                |
#### LCS 역추적
- LCS 구하기 위해 역추적 사용
- dp\[i\]\[j\] 에서 시작
- a: dp\[i-1\]\[j\] 와 b: dp\[i\]\[j-1\] 비교
	- 만약 a와 b의 숫자가 다르면 둘 중 더 큰 값으로 이동
	- a와 b의 숫자가 같으면 대각선으로 이동하고 해당 문자 저장